<!DOCTYPE html>
<html>
  <head>
    <title>Nunjucks</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css"
          href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
  </head>

  <body id="">
    <nav class="navbar navbar-default ">
      <a class="pull-left logo" href="/nunjucks">Nunjucks</a>

      <ul class="nav navbar-nav navbar-right pull-right">
        <li><a href="/nunjucks#download" class="download">Download</a></li>
        <li><a href="https://github.com/jlongster/nunjucks">Github</a></li>
        <li class="dropdown">
          <a href="getting-started.html" data-toggle="dropdown">Docs</a>

          <ul class="dropdown-menu">
            <li><a href="getting-started.html">Getting Started</a></li>
            <li><a href="templating.html">Templating</a></li>
            <li><a href="api.html">API</a></li>
            <li><a href="faq.html">FAQ</a></li>
          </ul>
        </li>
      </ul>
    </nav>

<div class="content clearfix">
  <aside class="col-sm-3">
    <div class="pages">
      <p><strong>Documentation</strong></p>

      <ul>
        <li><a href="getting-started.html">Getting Started</a></li>
        <li><a href="templating.html">Templating</a></li>
        <li><a href="api.html">API</a></li>
        <li><a href="faq.html">FAQ</a></li>
      </ul>
    </div>

    <div class="toc">
      <p><strong>Templates</strong></p>
      <ul>
<li>
<a href="#">模板</a>
<ul>
<li>
<a href="#1">变量</a>
</li>
<li>
<a href="#2">过滤器</a>
</li>
<li>
<a href="#3">模板继承</a>
</li>
<li>
<a href="#4">标签</a>
<ul>
<li>
<a href="#if">if</a>
</li>
<li>
<a href="#for">for</a>
</li>
<li>
<a href="#asynceach">asyncEach</a>
</li>
<li>
<a href="#asyncall">asyncAll</a>
</li>
<li>
<a href="#macro">macro</a>
</li>
<li>
<a href="#set">set</a>
</li>
<li>
<a href="#extends">extends</a>
</li>
<li>
<a href="#block">block</a>
</li>
<li>
<a href="#include">include</a>
</li>
<li>
<a href="#import">import</a>
</li>
<li>
<a href="#raw">raw</a>
</li>
</ul>
</li>
<li>
<a href="#5">关键字参数</a>
</li>
<li>
<a href="#6">注释</a>
</li>
<li>
<a href="#7">空白字符控制</a>
</li>
<li>
<a href="#expressions">Expressions</a>
<ul>
<li>
<a href="#math">Math</a>
</li>
<li>
<a href="#comparisons">Comparisons</a>
</li>
<li>
<a href="#logic">Logic</a>
</li>
<li>
<a href="#if-expression">If Expression</a>
</li>
<li>
<a href="#function-calls">Function Calls</a>
</li>
</ul>
</li>
<li>
<a href="#autoescaping">Autoescaping</a>
</li>
<li>
<a href="#global-functions">Global Functions</a>
<ul>
<li>
<a href="#rangestart-stop-step">range([start], stop, [step])</a>
</li>
<li>
<a href="#cycleritem1-item2-itemn">cycler(item1, item2, ...itemN)</a>
</li>
<li>
<a href="#joinerseparator">joiner([separator])</a>
</li>
</ul>
</li>
<li>
<a href="#builtin-filters">Builtin Filters</a>
</li>
</ul>
</li>
</ul>

    </div>
  </aside>

  <div class="col-sm-9 main">
    <h1 id="">模板</h1>

<p>这里包括 nunjuck 所有可用的功能。</p>

<blockquote>
<p>Nunjucks 是 <a href="http://jinja.pocoo.org/docs/">jinja2</a> 的 javascript 的实现，所以如果此文档有什么缺失，你可以直接查看 <a href="http://jinja.pocoo.org/docs/templates/">jinja2 的文档</a>，不过两者之间还存在一些<a href="http://jlongster.github.io/nunjucks/faq.html#can-i-use-the-same-templates-between-nunjucks-and-jinja2-what-are-the-differences">差异</a>。</p>
</blockquote>

<h2 id="1">变量</h2>

<p>变量会从模板上下文获取，如果你想显示一个变量可以：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">username</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>会从上下文查找 <code>username</code> 然后显示，可以像 javascript 一样获取变量的属性 (可使用点操作符或者中括号操作符)：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo.bar</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">foo</span><span class="o">[</span><span class="s2">&quot;bar&quot;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>如果变量的值为 <code>undefined</code> 或 <code>null</code> 将不显示，引用到 undefined 或 null 对象也是如此 (如 <code>foo</code> 为 undefined，<code>{{ foo }}</code>, <code>{{
foo.bar }}</code>, <code>{{ foo.bar.baz }}</code> 也不显示)。</p>

<h2 id="2">过滤器</h2>

<p>过滤器是一些可以执行变量的函数，通过管道操作符 (<code>|</code>) 调用，并可接受参数。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span> <span class="o">|</span> <span class="nf">title</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">foo</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s2">&quot;,&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">foo</span> <span class="o">|</span> <span class="nf">replace</span><span class="o">(</span><span class="s2">&quot;foo&quot;</span><span class="o">,</span> <span class="s2">&quot;bar&quot;</span><span class="o">)</span> <span class="o">|</span> <span class="nf">capitalize</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>第三个例子展示了链式过滤器，最终会显示 &quot;Bar&quot;，第一个过滤器将 &quot;foo&quot; 替换成 &quot;bar&quot;，第二个过滤器将首字母大写。</p>

<p>Nunjucks 提供了一些<a href="#builtin-filters">内置的过滤器</a>，你也可以<a href="api#Registering-custom-filters">自定义过滤器</a>。</p>

<h2 id="3">模板继承</h2>

<p>模板继承可以达到模板复用的效果，当写一个模板的时候可以定义 &quot;blocks&quot;，子模板可以覆盖他，同时支持多层继承。</p>

<p>如果有一个叫做 <code>parent.html</code> 的模板，如下所示：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">block</span> <span class="nv">header</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">This is the default content</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">&lt;section class=&quot;left&quot;&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">left</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/section&gt;</span>

<span class="x">&lt;section class=&quot;right&quot;&gt;</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">right</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  This is more content</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/section&gt;</span>
</code></pre></div>
<p>然后再写一个模板继承他</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;parent.html&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">left</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">This is the left side!</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">right</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">This is the right side!</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>以下为渲染结果</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="x">This is the default content</span>

<span class="x">&lt;section class=&quot;left&quot;&gt;</span>
<span class="x">  This is the left side!</span>
<span class="x">&lt;/section&gt;</span>

<span class="x">&lt;section class=&quot;right&quot;&gt;</span>
<span class="x">  This is the right side!</span>
<span class="x">&lt;/section&gt;  </span>
</code></pre></div>
<p>你可以将继承的模板设为一个变量，这样就可以动态指定继承的模板。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">extends</span> <span class="nv">parentTemplate</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>继承功能使用了 <a href="#extends"><code>extends</code></a> 和 <a href="#block"><code>block</code></a> 标签，<a href="http://jinja.pocoo.org/docs/templates/#template-inheritance">jinja2 文档</a>中有更细节的描述。</p>

<h2 id="4">标签</h2>

<p>Tags are special blocks that perform operations on sections of the
template. Nunjucks 包含一些内置的标签，你也可以<a href="api.html#custom-tags">自定义</a>。</p>

<h3 id="if">if</h3>

<p><code>if</code> 为分支语句，与 javascript 中的 <code>if</code> 类似。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">if</span> <span class="nv">variable</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  It is true</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>如果 <code>variable</code> 定义了并且为 true <em>(译者注：这里并非布尔值，和 javascript 的处理是一样的)</em> 则会显示 &quot;It is true&quot;，否则什么也不显示。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">if</span> <span class="nv">hungry</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  I am hungry</span>
<span class="cp">{%</span> <span class="k">elif</span> <span class="nv">tired</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  I am tired</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  I am good!</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>在<a href="#if-expression">内联表达式</a>(inline expression)中也可以使用 if。</p>

<h3 id="for">for</h3>

<p><code>for</code> 可以遍历数组 (arrays) 和对象 (dictionaries)。</p>

<blockquote>
<p>如果你使用的自定义模板加载器为异步的可查看 <a href="#asynceach"><code>asyncEach</code></a></p>
</blockquote>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="p">}];</span>
</code></pre></div><div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="x">&lt;h1&gt;Posts&lt;/h1&gt;</span>
<span class="x">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;li&gt;</span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/ul&gt;</span>
</code></pre></div>
<p>上面的示例显示了所有文章的标题。</p>

<p>你还可以遍历对象</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">food</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;ketchup&#39;</span><span class="o">:</span> <span class="s1">&#39;5 tbsp&#39;</span><span class="p">,</span>
  <span class="s1">&#39;mustard&#39;</span><span class="o">:</span> <span class="s1">&#39;1 tbsp&#39;</span><span class="p">,</span>
  <span class="s1">&#39;pickle&#39;</span><span class="o">:</span> <span class="s1">&#39;0 tbsp&#39;</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">ingredient</span><span class="o">,</span> <span class="nv">amount</span> <span class="k">in</span> <span class="nv">food</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  Use </span><span class="cp">{{</span> <span class="nv">amount</span> <span class="cp">}}</span><span class="x"> of </span><span class="cp">{{</span> <span class="nv">ingredient</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p><a href="http://jinja.pocoo.org/docs/templates/#dictsort"><code>dictsort</code></a> 过滤器可将对象排序 (<em>new in 0.1.8</em>)</p>

<p>除此之外，nunjucks 会将数组解开，数组内的值对应到变量 (<em>new in 0.1.8</em>)</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]];</span>
</code></pre></div><div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">x</span><span class="o">,</span> <span class="nv">y</span><span class="o">,</span> <span class="nv">z</span> <span class="k">in</span> <span class="nv">points</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  Point: </span><span class="cp">{{</span> <span class="nv">x</span> <span class="cp">}}</span><span class="x">, </span><span class="cp">{{</span> <span class="nv">y</span> <span class="cp">}}</span><span class="x">, </span><span class="cp">{{</span> <span class="nv">z</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>在循环中可获取一些特殊的变量</p>

<ul>
<li><code>loop.index</code>: 当前循环数 (1 indexed)</li>
<li><code>loop.index0</code>: 当前循环数 (0 indexed)</li>
<li><code>loop.revindex</code>: 当前循环数，从后往前 (1 indexed)</li>
<li><code>loop.revindex0</code>: 当前循环数，从后往前 (0 based)</li>
<li><code>loop.first</code>: 是否第一个</li>
<li><code>loop.last</code>: 是否最后一个</li>
<li><code>loop.length</code>: 总数</li>
</ul>

<h3 id="asynceach">asyncEach</h3>

<blockquote>
<p>这个是适用于异步模板，请读<a href="api.html#asynchronous-support">文档</a>。</p>
</blockquote>

<p><code>asyncEach</code> 为 <code>for</code> 的异步版本，只有当使用<a href="#asynchronous">自定义异步模板加载器</a>的时候才使用，否则请不要使用。异步过滤器和扩展也需要他，但是一旦使用了会自动转换成 <code>asyncEach</code>。</p>

<p><code>asyncEach</code> 和 <code>for</code> 的使用方式一致，但他支持循环的异步控制。将两者区分的原因是性能，大部分人使用同步模板，将 <code>for</code> 转换成原生的 for 语句会快很多。</p>

<p>编译时 nunjuck 不用关心模板是如何加载的，所以无法决定 <code>include</code> 是同步或异步。这也是为什么无法自动转换的原因，所以如果你使用异步模板加载器需要使用 <code>asyncEach</code>。</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">// If you are using a custom loader that is async, you need asyncEach</span>
<span class="kd">var</span> <span class="nx">env</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">nunjucks</span><span class="p">.</span><span class="nx">Environment</span><span class="p">(</span><span class="nx">AsyncLoaderFromDatabase</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="x">&lt;h1&gt;Posts&lt;/h1&gt;</span>
<span class="x">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">asyncEach</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;item-template.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endeach</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/ul&gt;</span>
</code></pre></div>
<h3 id="asyncall">asyncAll</h3>

<blockquote>
<p>这个是适用于异步模板，请读<a href="api.html#asynchronous-support">文档</a>。</p>
</blockquote>

<p><code>asyncAll</code> 和 <code>asyncEach</code> 类似，但 <code>asyncAll</code> 会并行的执行，每项的顺序仍然会保留。除非使用异步的过滤器、扩展或加载器，否则不要使用。</p>

<p>如果你写了一个 <code>lookup</code> 的过滤器用来从数据库获取一些文本，使用 <code>asyncAll</code> 可以并行渲染。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="x">&lt;h1&gt;Posts&lt;/h1&gt;</span>
<span class="x">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">asyncAll</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;li&gt;</span><span class="cp">{{</span> <span class="nv">item.id</span> <span class="o">|</span> <span class="nf">lookup</span> <span class="cp">}}</span><span class="x">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endall</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;/ul&gt;</span>
</code></pre></div>
<p>如果 <code>lookup</code> 是一个异步的过滤器，那么可能会比较慢（如从磁盘获取些数据）。<code>asyncAll</code> 会减少执行的时间，他会并行执行所有的异步操作，当所有的操作完成后才会继续渲染页面。</p>

<h3 id="macro">macro</h3>

<p>宏 (<code>macro</code>) 可以定义可复用的内容，类似与编程语言中的函数，看下面的示例：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;div class=&quot;field&quot;&gt;</span>
<span class="x">  &lt;input type=&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="x">&quot; name=&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">         value=&quot;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">escape</span> <span class="cp">}}</span><span class="x">&quot; /&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>现在 <code>field</code> 可以当作函数一样使用了：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">field</span><span class="o">(</span><span class="s1">&#39;user&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">field</span><span class="o">(</span><span class="s1">&#39;pass&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>支持<a href="#keyword-arguments">关键字参数</a>，通过链接查看具体使用方式。</p>

<p>还可以从其他模板 <a href="#import">import</a> 宏，可以使宏在整个项目中复用。</p>

<h3 id="set">set</h3>

<p><code>set</code> 可以设置和修改变量。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">username</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">username</span> <span class="o">=</span> <span class="s2">&quot;joe&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">username</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>如果 <code>username</code> 初始化的时候为 &quot;james&#39;, 最终将显示 &quot;james joe&quot;。</p>

<p>可以设置新的变量，并一起赋值。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">x</span><span class="o">,</span> <span class="nv">y</span><span class="o">,</span> <span class="nv">z</span> <span class="o">=</span> <span class="m">5</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>如果在顶级作用域使用 <code>set</code>，将会改变全局的上下文中的值。如果只在某个作用域 (<code>for</code>、 <code>include</code> 或其他) 中使用，只会影响该作用域。</p>

<h3 id="extends">extends</h3>

<p><code>extends</code> 用来指定模板继承，被指定的模板为父级模板，查看<a href="#template-inheritance">模板继承</a>。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<h3 id="block">block</h3>

<p>区块(<code>block</code>) 定义了模板片段并标识一个名字，在模板继承中使用。父级模板可指定一个区块，子模板覆盖这个区块，查看<a href="#template-inheritance">模板继承</a>。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">block</span> <span class="nv">css</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;link rel=&quot;stylesheet&quot; href=&quot;app.css&quot; /&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="o">}</span>
</code></pre></div>
<p>可以在循环中定义区块</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">item</span> <span class="cp">%}{{</span> <span class="nv">item</span> <span class="cp">}}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>子模板可以覆盖 <code>item</code> 区块并改变里面的内容。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;item.html&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">item</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">The name of the item is: </span><span class="cp">{{</span> <span class="nv">item.name</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<h3 id="include">include</h3>

<p><code>include</code> 可引入其他的模板，可以在多模板之间共享一些小模板，如果某个模板已使用了继承那么 <code>include</code> 将会非常有用。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;item.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>可在循环中引入模板</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">items</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;item.html&quot;</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>This is especially useful for cutting up templates into pieces so that the browser-side environment can render the small chunks when it needs to change the page.</p>

<h3 id="import">import</h3>

<p><code>import</code> 可加载不同的模板，可使你操作模板输出的数据，模板将会输出宏 (macro) 和顶级作用域的赋值 (使用 <a href="#set"><code>set</code></a>)。</p>

<p>被 import 进来的模板没有当前模板的上下文，所以无法使用当前模板的变量，</p>

<p>创建一个叫 <code>forms.html</code> 如下所示</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">macro</span> <span class="nv">field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;div class=&quot;field&quot;&gt;</span>
<span class="x">  &lt;input type=&quot;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="x">&quot; name=&quot;</span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x">&quot;</span>
<span class="x">         value=&quot;</span><span class="cp">{{</span> <span class="nv">value</span> <span class="o">|</span> <span class="nf">escape</span> <span class="cp">}}</span><span class="x">&quot; /&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">macro</span> <span class="nv">label</span><span class="o">(</span><span class="nv">text</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;div&gt;</span>
<span class="x">  &lt;label&gt;</span><span class="cp">{{</span> <span class="nv">text</span> <span class="cp">}}</span><span class="x">&lt;/label&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endmacro</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>我们可以 import 这个模板并将模板的输出绑定到变量 <code>forms</code> 上，然后就可以使用这个变量了：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">import</span> <span class="s2">&quot;forms.html&quot;</span> <span class="k">as</span> <span class="nv">forms</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">forms.label</span><span class="o">(</span><span class="s1">&#39;Username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">forms.input</span><span class="o">(</span><span class="s1">&#39;user&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">forms.label</span><span class="o">(</span><span class="s1">&#39;Password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">forms.input</span><span class="o">(</span><span class="s1">&#39;pass&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>也可以使用 <code>from import</code> 从模板中 import 指定的值到当前的命名空间：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">from</span> <span class="s2">&quot;forms.html&quot;</span> <span class="k">import</span> <span class="nv">input</span><span class="o">,</span> <span class="nv">label</span> <span class="k">as</span> <span class="nv">description</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">description</span><span class="o">(</span><span class="s1">&#39;Username&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">input</span><span class="o">(</span><span class="s1">&#39;user&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">description</span><span class="o">(</span><span class="s1">&#39;Password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">input</span><span class="o">(</span><span class="s1">&#39;pass&#39;</span><span class="o">,</span> <span class="nv">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<h3 id="raw">raw</h3>

<p>如果你想输出一些 nunjucks 特殊的标签 (如 <code>{{</code>)，可以使用 <code>raw</code> 使所有的内容输出为纯文本。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">raw</span> <span class="cp">%}</span>this will {{ not be processed }}{%<span class="cp">{%</span> <span class="k">endraw</span> <span class="cp">%}{%</span> <span class="k">raw</span> <span class="cp">%}</span><span class="x"> endraw %}</span>
</code></pre></div>
<h2 id="5">关键字参数</h2>

<p>jinja2 使用 Python 的关键字参数，支持函数，过滤器和宏。Nunjucks 会通过一个调用转换 (calling convention) 来支持。</p>

<p>关键字参数如下：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span><span class="o">(</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="nv">bar</span><span class="o">=</span><span class="m">3</span><span class="o">,</span> <span class="nv">baz</span><span class="o">=</span><span class="m">4</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p><code>bar</code> 和 <code>baz</code> 为关键字参数，Nunjucks 将他们转换成一个对象作为最后一个参数传入，等价于 javascript 的如下调用：</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="nx">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">{</span> <span class="nx">bar</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">baz</span><span class="o">:</span> <span class="mi">4</span><span class="p">})</span>
</code></pre></div>
<p>因为这使一个标准的调用转换，所以适用于所有的符合预期的函数和过滤器。查看 <a href="api#Keyword-Arguments">API 章节</a>获得更多信息。</p>

<p>定义宏的时候也可以使用关键字参数，定义参数值时可设置默认值。Nunjucks 会自动将关键字参数与宏里定义的值做匹配。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{% macro foo(x, y, z=5, w=6) %}
{{ x }}, {{ y }}, {{ z }}, {{ w}}
{% endmacro %}

{{ foo(1, 2) }}        -&gt; 1, 2, 5, 6
{{ foo(1, 2, w=10) }}  -&gt; 1, 2, 5, 10
</code></pre></div>
<p>在宏中还可以混合使用位置参数 (positional arguments) 和关键字参数。如示例，你可以将位置参数用作关键字参数：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span><span class="o">(</span><span class="m">20</span><span class="o">,</span> <span class="nv">y</span><span class="o">=</span><span class="m">21</span><span class="o">)</span> <span class="cp">}}</span><span class="x">     -&gt; 20, 21, 5, 6</span>
</code></pre></div>
<p>你还可以用位置参数来替换关键字参数：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span><span class="o">(</span><span class="m">5</span><span class="o">,</span> <span class="m">6</span><span class="o">,</span> <span class="m">7</span><span class="o">,</span> <span class="m">8</span><span class="o">)</span> <span class="cp">}}</span><span class="x">   -&gt; 5, 6, 7, 8</span>
</code></pre></div>
<p>如下示例，你可以跳过 (&quot;skip&quot;) 位置参数：</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span><span class="o">(</span><span class="m">8</span><span class="o">,</span> <span class="nv">z</span><span class="o">=</span><span class="m">7</span><span class="o">)</span> <span class="cp">}}</span><span class="x">      -&gt; 8, , 7, 6</span>
</code></pre></div>
<h2 id="6">注释</h2>

<p>你可以使用 <code>{#</code> and <code>#}</code> 来写注释，渲染时将会去除所有的注释。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="c">{# Loop through all the users #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">user</span> <span class="k">in</span> <span class="nv">users</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<h2 id="7">空白字符控制</h2>

<p><em>Introduced in v0.1.8</em></p>

<p>模板在正常情况会将变量 (variable) 和标签区块 (tag blocks) 周围的空白字符完全输出。有时，你不想输出一些额外的空白字符，但代码又需要一些空白字符来显得整洁。</p>

<p>你可以在开始和结束区块 (start or end block tag) 添加 (<code>-</code>) 来去除前面和后面的空白字符。</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span><span class="m">2</span><span class="o">,</span><span class="m">3</span><span class="o">,</span><span class="m">4</span><span class="o">,</span><span class="m">5</span><span class="o">]</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">i</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>上面准确的输出为 &quot;12345&quot;，<code>-%}</code> 会去除标签右侧的空白字符，<code>{%-</code> 会去除标签之前的空白字符。</p>

<h2 id="expressions">Expressions</h2>

<p>You can use many types of literal expressions that you are used to in javascript.</p>

<ul>
<li>Strings: <code>&quot;How are you?&quot;</code>, <code>&#39;How are you?&#39;</code></li>
<li>Numbers: <code>40</code>, <code>30.123</code></li>
<li>Arrays: <code>[1, 2, &quot;array&quot;]</code></li>
<li>Dicts: <code>{ one: 1, two: 2 }</code></li>
<li>Boolean: <code>true</code>, <code>false</code></li>
</ul>

<h3 id="math">Math</h3>

<p>Nunjucks allows you to operate on values (though it should be used sparingly, as most of your logic should be in code). The following operators are available:</p>

<ul>
<li>Addition: <code>+</code></li>
<li>Subtraction: <code>-</code></li>
<li>Division: <code>/</code></li>
<li>Division and integer truncation: <code>//</code></li>
<li>Division remainder: <code>%</code></li>
<li>Multiplication: <code>*</code></li>
<li>Power: <code>**</code></li>
</ul>

<p>You can use them like this:</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="m">2</span> <span class="o">+</span> <span class="m">3</span> <span class="cp">}}</span><span class="x">       (outputs 5)</span>
<span class="cp">{{</span> <span class="m">10</span><span class="o">/</span><span class="m">5</span> <span class="cp">}}</span><span class="x">        (outputs 2)</span>
<span class="cp">{{</span> <span class="nv">numItems</span><span class="o">*</span><span class="m">2</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<h3 id="comparisons">Comparisons</h3>

<ul>
<li><code>==</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
</ul>

<p>Examples:</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">if</span> <span class="nv">numUsers</span> <span class="o">&lt;</span> <span class="m">5</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">i</span> <span class="o">==</span> <span class="m">0</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<h3 id="logic">Logic</h3>

<ul>
<li><code>and</code></li>
<li><code>or</code></li>
<li><code>not</code></li>
<li>Use parentheses to group expressions</li>
</ul>

<p>Examples:</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">if</span> <span class="nv">users</span> <span class="k">and</span> <span class="nv">showUsers</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">i</span> <span class="o">==</span> <span class="m">0</span> <span class="k">and</span> <span class="k">not</span> <span class="nv">hideFirst</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">if</span> <span class="o">(</span><span class="nv">x</span> <span class="o">&lt;</span> <span class="m">5</span> <span class="k">or</span> <span class="nv">y</span> <span class="o">&lt;</span> <span class="m">5</span><span class="o">)</span> <span class="k">and</span> <span class="nv">foo</span> <span class="cp">%}</span><span class="x">...</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<h3 id="if-expression">If Expression</h3>

<p>Similar to javascript&#39;s ternary operator, you can use <code>if</code> as if it were an inline expression:</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="s2">&quot;true&quot;</span> <span class="k">if</span> <span class="nv">foo</span> <span class="k">else</span> <span class="s2">&quot;false&quot;</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<p>The above outputs the string &quot;true&quot; if foo is truthy, otherwise &quot;false&quot;. This is especially useful for default values like so:</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">baz</span><span class="o">(</span><span class="nv">foo</span> <span class="k">if</span> <span class="nv">foo</span> <span class="k">else</span> <span class="s2">&quot;default&quot;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<h3 id="function-calls">Function Calls</h3>

<p>If you have passed a javascript method to your template, you can call it like normal.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span><span class="o">(</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="m">3</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>
<h2 id="autoescaping">Autoescaping</h2>

<p>If autoescaping is turned on in the environment, all output will automatically be escaped for safe output. To manually mark output as safe, use the <code>safe</code> filter. Nunjucks will not escape this output.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span><span class="x">           // &amp;lt;span%gt;</span>
<span class="cp">{{</span> <span class="nv">foo</span> <span class="o">|</span> <span class="nf">safe</span> <span class="cp">}}</span><span class="x">    // &lt;span&gt;</span>
</code></pre></div>
<p>If autoescaping is turned off, all output will be rendered as it is. You can manually escape variables with the <code>escape</code> filter.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{{</span> <span class="nv">foo</span> <span class="cp">}}</span><span class="x">           // &lt;span&gt;</span>
<span class="cp">{{</span> <span class="nv">foo</span> <span class="o">|</span> <span class="nf">escape</span> <span class="cp">}}</span><span class="x">  // &amp;lt;span&amp;gt;</span>
</code></pre></div>
<h2 id="global-functions">Global Functions</h2>

<p>There are a few builtin global functions that cover some common cases.</p>

<h3 id="rangestart-stop-step">range([start], stop, [step])</h3>

<p>If you need to iterate over a fixed set of numbers, <code>range</code> generates the set for you. The numbers begin at <code>start</code> (default 0) and incremeny by <code>step</code> (default 1) until it reaches <code>stop</code>, not including it.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">for</span> <span class="nv">i</span> <span class="k">in</span> <span class="nv">range</span><span class="o">(</span><span class="m">0</span><span class="o">,</span> <span class="m">5</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">i</span> <span class="cp">}}</span><span class="x">,</span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>The above outputs <code>0,1,2,3,4</code>.</p>

<h3 id="cycleritem1-item2-itemn">cycler(item1, item2, ...itemN)</h3>

<p>An easy way to rotate through several values is to use <code>cycler</code>, which takes any number of arguments and cycles through them.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">cls</span> <span class="o">=</span> <span class="nv">cycler</span><span class="o">(</span><span class="s2">&quot;odd&quot;</span><span class="o">,</span> <span class="s2">&quot;even&quot;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">row</span> <span class="k">in</span> <span class="nv">rows</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;div class=&quot;</span><span class="cp">{{</span> <span class="nv">cls.next</span><span class="o">()</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span><span class="cp">{{</span> <span class="nv">row.name</span> <span class="cp">}}</span><span class="x">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>In the above example, odd rows have the class &quot;odd&quot; and even rows have the class &quot;even&quot;.</p>

<h3 id="joinerseparator">joiner([separator])</h3>

<p>When combining multiple items, it&#39;s common to want to delimit them with something like a comma, but you don&#39;t want to output the separator for the first item. The <code>joiner</code> class will output <code>separator</code> (default &quot;,&quot;) whenever it is called except for the first time.</p>
<div class="highlight"><pre><code class="jinja language-jinja" data-lang="jinja"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">comma</span> <span class="o">=</span> <span class="nv">joiner</span><span class="o">()</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">tag</span> <span class="k">in</span> <span class="nv">tags</span> -<span class="cp">%}</span><span class="x"></span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">comma</span><span class="o">()</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">tag</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</code></pre></div>
<p>If <code>tags</code> was <code>[&quot;food&quot;, &quot;beer&quot;, &quot;dessert&quot;]</code>, the above example would output <code>food, beer, dessert</code>.</p>

<h2 id="builtin-filters">Builtin Filters</h2>

<p>Nunjucks has ported most of jinja&#39;s filters (click through for documentation):</p>

<ul>
<li><a href="http://jinja.pocoo.org/docs/templates/#abs">abs</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#batch">batch</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#capitalize">capitalize</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#center">center</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#default">default</a> (aliased as <code>d</code>)</li>
<li><a href="http://jinja.pocoo.org/docs/templates/#dictsort">dictsort</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#escape">escape</a> (aliased as <code>e</code>)</li>
<li><a href="http://jinja.pocoo.org/docs/templates/#safe">safe</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#first">first</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#groupby">groupby</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#indent">indent</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#join">join</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#last">last</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#length">length</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#list">list</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#lower">lower</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#random">random</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#replace">replace</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#reverse">reverse</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#round">round</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#slice">slice</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#sort">sort</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#string">string</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#title">title</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#trim">trim</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#truncate">truncate</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#upper">upper</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#urlencode">urlencode</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#wordcount">wordcount</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#float">float</a></li>
<li><a href="http://jinja.pocoo.org/docs/templates/#int">int</a></li>
</ul>

<p>Alternatively, it&#39;s easy to <a href="https://github.com/jlongster/nunjucks/blob/master/src/filters.js">read the JavaScript
code</a>
that implements these filters.</p>

  </div>
</div>



    <footer>
      Found a bug in the
      documentation? <a href="https://github.com/jlongster/nunjucks-docs">Fix
      it or file an issue</a>!
    </footer>

    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/bootstrap/js/affix.js"></script>

    <script src="js/app.js"></script>
    <script src="js/subpage.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9014321-3', 'jlongster.github.io');
  ga('send', 'pageview');
</script>
  </body>
</html>
